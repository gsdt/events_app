<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Event Detail</title>
    <script
        src="https://code.jquery.com/jquery-3.4.1.js"
        integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
        crossorigin="anonymous">
    </script>
</head>
<body>
    <h1>{{ event_title}}</h1>
    <div id='main'>
    </div>
</body>
<script>
    var roomName = {{ room_name_json }};

    var chatSocket = new WebSocket(
        'ws://' + window.location.host +
        '/ws/' + roomName + '/');

    chatSocket.onmessage = function(e) {
        var data = JSON.parse(e.data);
        console.log(data['content'])
        $('#main').append(
            "<pre>"+JSON.stringify(data['content'], null, 4)+"</pre>"
        );
        $('body,html').animate({scrollTop: document.body.scrollHeight}, 800);
    };

    chatSocket.onclose = function(e) {
        console.error('Chat socket closed unexpectedly');
    };
</script>
</html>